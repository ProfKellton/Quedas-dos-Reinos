<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quedas dos Reinos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="Game.css">
</head>
<body class="bg-gray-800 text-amber-300">
    <div class="container">

        <div id="main-menu" class="screen menu-panel flex">
            <h1 class="text-6xl font-bold mb-4">Quedas dos Reinos</h1>
            <p class="text-xl">Um épico jogo de tabuleiro medieval</p>
            <div class="flex flex-col space-y-4">
                <button id="start-game-btn" class="btn">Iniciar Jogo</button>
                <button id="rules-btn" class="btn">Regras</button>
            </div>
            <div id="message-box" class="mt-4 text-center text-xl hidden"></div>
        </div>

        <div id="rules-screen" class="hidden">
            <h2 class="text-3xl font-bold mb-4">Regras do Jogo</h2>
            <p><strong>Objetivo:</strong> O primeiro jogador a chegar na última casa do tabuleiro vence!</p>
            <p><strong>Configuração:</strong> Escolha o número de jogadores humanos e IAs, e a dificuldade do jogo. A dificuldade afeta as decisões das IAs em caso de conflito.</p>
            <p><strong>Turno:</strong> Cada jogador rola um dado para mover sua peça. O número de casas a mover é igual ao resultado do dado.</p>
            <p><strong>Casas Especiais:</strong></p>
            <ul class="list-disc list-inside">
                <li><strong>Casas de Bônus (Verde):</strong> Ganhe 1 Troféu e receba um bônus de história. Jogadores humanos terão que fazer uma escolha e rolar um dado de ação. Um resultado 4, 5 ou 6 significa sucesso, podendo resultar em recompensas maiores. Um resultado 1, 2 ou 3 significa falha, podendo resultar na perda do bônus ou até mesmo uma penalidade. IAs resolvem o evento automaticamente. Ao acumular 3 ou mais troféus, seu personagem é promovido a uma classe superior.</li>
                <li><strong>Casas de Desafio (Vermelha):</strong> Encare um desafio que pode te fazer retroceder casas. Jogadores humanos terão opções para tentar evitar a penalidade, como fugir ou lutar, e deverão rolar um dado de ação. Um resultado 4, 5 ou 6 significa sucesso, permitindo evitar a punição. Um resultado 1, 2 ou 3 significa falha, e a penalidade será aplicada. IAs resolvem o evento automaticamente.</li>
                <li><strong>Casas de Boss (Bordô):</strong> Se dois jogadores pararem na mesma casa, devem se unir para enfrentar o Boss. A vitória exige que os atributos combinados dos jogadores sejam superiores aos do Boss.</li>
            </ul>
            <p><strong>Conflito entre Jogadores:</strong> Se um jogador parar em uma casa já ocupada por outro (exceto a casa inicial), um conflito pode ser iniciado. O jogador que chegou por segundo pode escolher entre "Paz" ou "Conflito". Em caso de conflito, o jogador com a maioria dos atributos (Ataque, Defesa, Mana) vence. O vencedor ganha 1 Troféu e o perdedor perde 1.</p>
            <p><strong>Ficha de Personagem:</strong> Antes de começar, visualize a ficha de cada classe com seus atributos e sua possível evolução.</p>
            <div class="flex justify-center mt-4">
                <button id="close-rules-btn" class="btn">Fechar</button>
            </div>
        </div>

        <div id="setup-screen" class="screen flex-col">
            <h2 class="text-4xl font-bold">Configurar Jogo</h2>
            
            <div class="flex flex-col items-center space-y-4">
                <div class="flex items-center space-x-2">
                    <label for="difficulty-select">Dificuldade:</label>
                    <select id="difficulty-select" class="bg-gray-700 text-amber-300 p-2 rounded">
                        <option value="easy">Fácil</option>
                        <option value="medium">Médio</option>
                        <option value="hard">Difícil</option>
                    </select>
                </div>

                <div class="flex items-center space-x-2">
                    <label for="map-select">Mapa:</label>
                    <select id="map-select" class="bg-gray-700 text-amber-300 p-2 rounded">
                        <option value="floresta">Floresta</option>
                        <option value="masmorra">Masmorra</option>
                        <option value="planicie">Planície</option>
                        <option value="castelo">Castelo</option>
                        <option value="pantano">Pântano</option>
                        <option value="deserto">Deserto</option>
                    </select>
                </div>
                
                <div class="flex items-center space-x-2">
                    <label for="player-count">Jogadores Humanos:</label>
                    <select id="player-count" class="bg-gray-700 text-amber-300 p-2 rounded">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>
                
                <div class="flex items-center space-x-2">
                    <label for="ai-count">Jogadores IA:</label>
                    <select id="ai-count" class="bg-gray-700 text-amber-300 p-2 rounded">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
            </div>

            <div id="player-setup-form" class="space-y-4 mt-4"></div>
            <button id="begin-game-btn" class="btn mt-4">Começar Jogo</button>
            <button id="back-to-main-btn" class="btn mt-2">Voltar</button>
        </div>
        
        <div id="character-card-popup" class="hidden card-popup">
            <div class="card">
                <img id="character-card-img" class="stat-card-image mx-auto" src="" alt="">
                <h3 id="character-card-name" class="text-2xl font-bold mb-4"></h3>
                <p id="character-card-class" class="text-xl mb-2"></p>
                <div class="text-left space-y-2 mt-4">
                    <p><strong>Ataque:</strong> <span id="character-card-atk"></span></p>
                    <p><strong>Defesa:</strong> <span id="character-card-def"></span></p>
                    <p><strong>Mana/Estamina:</strong> <span id="character-card-mana"></span></p>
                </div>
                <div class="text-left mt-4 border-t border-gray-500 pt-4">
                    <h4 class="text-xl font-bold">Promoção:</h4>
                    <p id="character-card-promoted-class" class="text-lg"></p>
                    <div class="text-left space-y-2 mt-2">
                        <p><strong>Ataque:</strong> <span id="character-promoted-atk"></span></p>
                        <p><strong>Defesa:</strong> <span id="character-promoted-def"></span></p>
                        <p><strong>Mana/Estamina:</strong> <span id="character-promoted-mana"></span></p>
                    </div>
                </div>
                <button id="close-character-card-btn" class="btn mt-4">Fechar</button>
            </div>
        </div>

        <div id="game-screen" class="screen flex-col">
            <div class="flex items-center justify-between w-full max-w-6xl p-4 bg-gray-900 border-2 border-amber-500 rounded-xl mb-4">
                <div id="turn-info" class="text-2xl font-bold"></div>
                <div id="player-list" class="text-sm"></div>
            </div>

            <div id="game-board-container">
                <div id="game-board"></div>
                <div id="log-panel" class="hidden lg:flex">
                    <h3 class="text-xl font-bold mb-2 text-center">Últimos Movimentos</h3>
                    <div id="log-content"></div>
                    <button id="close-log-btn" class="btn mt-4 lg:hidden">Fechar Log</button>
                    <button id="leave-game-btn" class="btn mt-4">Sair da partida</button>
                </div>
            </div>

            <div id="control-panel" class="mt-4 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4">
                <button id="roll-dice-btn" class="btn">Rolar Dado</button>
                <button id="toggle-log-btn" class="btn lg:hidden">Ver Log</button>
                <div class="dice-container">
                    <div id="dice" class="dice">
                        <div class="dice-face front face-1"></div>
                        <div class="dice-face back face-6"></div>
                        <div class="dice-face right face-4"></div>
                        <div class="dice-face left face-3"></div>
                        <div class="dice-face top face-5"></div>
                        <div class="dice-face bottom face-2"></div>
                    </div>
                </div>
                <div id="dice-result" class="text-4xl w-12 text-center"></div>
            </div>
        </div>
        
        <div id="card-popup" class="hidden card-popup">
            <div class="card">
                <img id="card-image" src="" alt="Imagem do Evento" class="mx-auto mb-4 rounded-lg hidden" style="max-height: 200px;">
                <h3 id="card-title" class="text-2xl font-bold mb-4"></h3>
                <p id="card-description" class="text-lg"></p>
                <button id="close-card-btn" class="btn mt-4 hidden">Fechar</button>
            </div>
        </div>

        <div id="choice-popup" class="hidden card-popup">
            <div class="card bg-opacity-95 backdrop-blur-sm">
                <h3 id="choice-title" class="text-2xl font-bold mb-4"></h3>
                <p id="choice-description" class="text-lg mb-4"></p>
                <div id="choice-buttons" class="flex flex-wrap justify-center gap-2 mb-4">
                    </div>
                <div class="flex items-center justify-center space-x-4 mt-4">
                    <button id="choice-roll-dice-btn" class="btn hidden !text-base !py-2 !px-4">Rolar Dado de Ação</button>
                    <div id="choice-dice-result" class="text-4xl w-12 text-center font-bold"></div>
                </div>
                <p id="choice-result-text" class="text-lg mt-4 h-8"></p>
                <button id="close-choice-popup-btn" class="btn mt-4 hidden">Continuar</button>
            </div>
        </div>

        <div id="conflict-screen" class="hidden fixed top-0 left-0 w-full h-full bg-black bg-opacity-80 flex items-center justify-center z-50">
            <div class="bg-gray-900 border-4 border-red-500 p-8 rounded-xl shadow-lg text-center space-y-6 max-w-lg w-11/12">
                <h2 id="conflict-title" class="text-3xl font-bold">Conflito!</h2>
                <div id="conflict-details" class="flex flex-col md:flex-row justify-center items-center md:items-start space-y-4 md:space-y-0 md:space-x-8">
                    <div id="conflict-player-card" class="stat-card">
                        <img id="conflict-player-img" class="stat-card-image" src="" alt="">
                        <h4 id="conflict-player-name"></h4>
                        <p>Ataque: <span id="conflict-player-atk"></span></p>
                        <p>Defesa: <span id="conflict-player-def"></span></p>
                        <p>Estamina: <span id="conflict-player-mana"></span></p>
                    </div>
                    <div class="text-4xl font-bold mt-8">VS</div>
                    <div id="conflict-opponent-card" class="stat-card">
                        <img id="conflict-opponent-img" class="stat-card-image" src="" alt="">
                        <h4 id="conflict-opponent-name"></h4>
                        <p>Ataque: <span id="conflict-opponent-atk"></span></p>
                        <p>Defesa: <span id="conflict-opponent-def"></span></p>
                        <p>Estamina: <span id="conflict-opponent-mana"></span></p>
                    </div>
                </div>
                <div id="conflict-result"></div>
                <div id="conflict-buttons">
                    <button id="peace-btn" class="btn">Paz</button>
                    <button id="conflict-btn" class="btn">Conflito</button>
                </div>
                <button id="close-conflict-btn" class="btn hidden">Continuar</button>
            </div>
        </div>

        <div id="boss-choice-popup" class="hidden card-popup">
            <div class="card">
                <h3 class="text-2xl font-bold mb-4">Você encontrou o Boss!</h3>
                <p class="text-lg mb-4">Escolha sua ação:</p>
                <button id="boss-fight-alone-btn" class="btn">Lutar Sozinho (e morrer)</button>
                <button id="boss-wait-btn" class="btn">Esperar por um Aliado</button>
            </div>
        </div>
        
        <div id="win-screen" class="screen menu-panel">
            <h2 class="text-5xl font-bold">Fim de Jogo!</h2>
            <h3 class="text-3xl mb-4">Ranking Final:</h3>
            <div id="final-ranking" class="text-xl w-full max-w-md"></div>
            <button id="play-again-btn" class="btn mt-6">Jogar Novamente</button>
        </div>

    </div>

    <audio id="music-menu" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3"></audio>
    <audio id="music-floresta" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>
    <audio id="music-masmorra" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"></audio>
    <audio id="music-planicie" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-15.mp3"></audio>
    <audio id="music-castelo" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3"></audio>
    <audio id="music-pantano" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-13.mp3"></audio>
    <audio id="music-deserto" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"></audio>

    <script src="Game.js"></script>

</body>
</html>